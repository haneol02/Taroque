# Taroque - AI 타로/사주 상담 웹서비스

AI가 사용자의 고민을 분석하고 타로 카드 해석 및 사주 풀이를 제공하는 통합 운세 웹서비스입니다.

## 🌟 주요 기능

### 타로 상담
- **AI 기반 질문 분석**: 사용자의 질문을 분석하여 최적의 카드 수(3/5/7장) 자동 결정
- **실시간 카드 선택**: 78장의 타로 카드 중 직관적으로 선택
- **정/역방향 판정**: 랜덤으로 카드의 방향 결정
- **AI 카드 해석**: OpenAI GPT를 활용한 전문적인 타로 해석

### 사주 상담
- **생년월일시 입력**: 양력/음력, 성별 선택 가능
- **시간 미상 옵션**: 태어난 시간을 모르는 경우 정오 기준으로 분석
- **AI 사주 풀이**: 30년 경력 명리학자 페르소나로 깊이 있는 사주 해석
- **종합적 운세 분석**: 사주팔자, 오행, 대운, 세운 등 전문적인 분석

### 공통 기능
- **GPT 모델 선택**: 4가지 모델(GPT-4o Mini, GPT-4o, GPT-4 Turbo, GPT-4) 중 선택
- **API 키 관리**: 접었다 펼칠 수 있는 UI, 인증 상태 표시
- **결과 저장/공유**:
  - 이미지로 저장 (PNG)
  - 네이티브 공유 기능 (모바일)
- **예시 질문 제공**: 카테고리별 예시 질문으로 쉬운 시작
- **원페이지 인터페이스**: 부드러운 페이지 전환 효과

## 🚀 기술 스택

- **Frontend**: Next.js 15.5, React 19.1, TypeScript
- **Styling**: Tailwind CSS 4
- **AI**: OpenAI API (사용자 API 키 사용)
- **Image Capture**: dom-to-image-more
- **Markdown**: marked 라이브러리
- **Build Tool**: Turbopack

## 📁 프로젝트 구조

```
src/
├── app/
│   ├── page.tsx                 # 메인 상담 페이지 (타로/사주 통합)
│   ├── layout.tsx               # 레이아웃
│   ├── globals.css              # 전역 스타일
│   └── api/
│       ├── verify-api-key/      # API 키 검증
│       ├── analyze-question/    # 타로 질문 분석 API
│       ├── interpret-cards/     # 타로 카드 해석 API
│       └── interpret-saju/      # 사주 풀이 API
├── components/
│   ├── TarotCard.tsx            # 타로 카드 컴포넌트
│   ├── ApiKeyInput.tsx          # API 키 입력 및 모델 선택
│   └── SajuInput.tsx            # 사주 정보 입력
├── lib/
│   ├── openai.ts                # OpenAI 클라이언트 설정
│   ├── tarot-data.ts            # 타로 카드 데이터 (78장)
│   └── saju-data.ts             # 사주 데이터 및 예시 질문
└── types/
    ├── tarot.ts                 # 타입 정의 (타로/사주)
    └── dom-to-image-more.d.ts   # 라이브러리 타입 선언
```

## 🛠 설치 및 실행

1. **의존성 설치**
   ```bash
   npm install
   ```

2. **개발 서버 실행**
   ```bash
   npm run dev
   ```

3. **브라우저에서 확인**
   - http://localhost:3000 접속
   - OpenAI API 키 입력 및 인증
   - 타로 또는 사주 선택

## 🎯 사용 방법

### 타로 상담
1. **API 키 입력**: OpenAI API 키 입력 후 인증
2. **모델 선택**: 원하는 GPT 모델 선택 (기본: GPT-4o Mini)
3. **서비스 선택**: 타로 선택
4. **질문 입력**: 고민이나 궁금한 점을 텍스트로 작성
5. **카드 선택**: AI가 추천한 수량만큼 카드 선택
6. **해석 확인**: AI가 생성한 타로 해석 확인
7. **결과 저장/공유**: 이미지로 저장하거나 SNS 공유

### 사주 상담
1. **API 키 입력**: OpenAI API 키 입력 후 인증
2. **모델 선택**: 원하는 GPT 모델 선택
3. **서비스 선택**: 사주 선택
4. **생년월일시 입력**:
   - 양력/음력 선택
   - 시간을 모르면 체크박스 선택
   - 성별 선택
5. **질문 입력**: 궁금한 점 작성
6. **풀이 확인**: AI가 생성한 사주 해석 확인
7. **결과 저장/공유**: 이미지로 저장하거나 SNS 공유

## 🔮 타로 카드 구성

- **메이저 아르카나**: 22장 (0-21번)
- **마이너 아르카나**: 56장
  - 완드 (Wands): 14장
  - 컵 (Cups): 14장
  - 소드 (Swords): 14장
  - 펜타클 (Pentacles): 14장

## 🎨 GPT 모델 옵션

| 모델 | 특징 | 용도 |
|------|------|------|
| GPT-4o Mini | 빠르고 저렴 | 일반적인 상담, 빠른 응답 |
| GPT-4o | 균형 | 속도와 품질의 균형 |
| GPT-4 Turbo | 고품질 | 더 깊이 있는 해석 |
| GPT-4 | 최고품질 | 가장 정확하고 상세한 해석 |

## 🚀 배포

### Vercel 배포
```bash
# Vercel CLI 사용
npm install -g vercel
vercel
```

배포 후 사용자가 직접 API 키를 입력하므로 환경 변수 설정이 불필요합니다.

## 📱 주요 특징

- **클라이언트 사이드 API 키 관리**:
  - 서버에 API 키를 저장하지 않음
  - localStorage에 안전하게 보관
  - 실시간 API 키 검증
- **반응형 디자인**: 모바일과 데스크톱 모두 완벽 지원
- **다크 테마**: 신비로운 운세 분위기의 다크 UI
- **마크다운 지원**: AI 응답을 마크다운으로 렌더링
- **접을 수 있는 UI**: API 키 입력창 접기/펼치기
- **이미지 저장/공유**:
  - PNG 형식으로 고화질 저장
  - Web Share API를 통한 네이티브 공유
  - SNS 공유 지원

## 🔐 보안 및 개인정보

- API 키는 브라우저 localStorage에만 저장
- 서버에 API 키를 전송하지 않음 (API 호출 시에만 사용)
- 사주 정보 등 개인정보는 저장하지 않음
- 모든 데이터는 클라이언트 측에서만 처리

## 💡 향후 개선사항

- [x] 타로 카드 해석
- [x] 사주 풀이 기능
- [x] GPT 모델 선택
- [x] 결과 이미지 저장/공유
- [ ] 타로 카드 이미지 추가
- [ ] 상담 히스토리 저장 및 관리
- [ ] 다크모드/라이트모드 토글
- [ ] 다국어 지원 (영어, 일본어 등)
- [ ] PWA 지원
- [ ] 주간/월간 운세
- [ ] 꿈 해몽 기능
